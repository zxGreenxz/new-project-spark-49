# üìê H∆∞·ªõng D·∫´n T√πy Ch·ªânh K√≠ch Th∆∞·ªõc Bill

## ‚ú® T√≠nh NƒÉng M·ªõi

B√¢y gi·ªù b·∫°n c√≥ th·ªÉ t√πy ch·ªânh **chi·ªÅu d√†i** v√† **chi·ªÅu r·ªông** c·ªßa bill ho√†n to√†n theo √Ω mu·ªën!

### üéØ C√°c T√πy Ch·ªçn

1. **Width (Chi·ªÅu r·ªông)** - T√πy ch·ªânh ƒë·ªô r·ªông bill
2. **Height (Chi·ªÅu d√†i)** - T√πy ch·ªânh ƒë·ªô d√†i bill
3. **Threshold (ƒê·ªô ƒë·∫≠m)** - T√πy ch·ªânh ƒë·ªô ƒë·∫≠m c·ªßa ch·ªØ
4. **Scale (T·ª∑ l·ªá)** - T√πy ch·ªânh ch·∫•t l∆∞·ª£ng render

## üìè Width - Chi·ªÅu R·ªông

### Presets C√≥ S·∫µn

| Width | Kh·ªï gi·∫•y | Khi n√†o d√πng |
|-------|----------|--------------|
| 576px | 80mm | ‚≠ê Ph·ªï bi·∫øn nh·∫•t, khuy·∫øn ngh·ªã |
| 512px | 72mm | Kh·ªï gi·∫•y l·ªõn |
| 432px | 60mm | Kh·ªï gi·∫•y trung b√¨nh |
| 384px | 54mm | Kh·ªï gi·∫•y nh·ªè |

### Custom Width

**C√°ch d√πng:**
1. Ch·ªçn "Custom..." trong dropdown Width
2. Nh·∫≠p s·ªë pixels (200-800)
3. Test in

**V√≠ d·ª•:**
- M√°y in 58mm ‚Üí width: 410px
- M√°y in 76mm ‚Üí width: 540px
- M√°y in 90mm ‚Üí width: 640px

**C√¥ng th·ª©c t√≠nh:**
```
Width (pixels) ‚âà Kh·ªï gi·∫•y (mm) √ó 7.2
```

**V√≠ d·ª• t√≠nh:**
- 80mm √ó 7.2 = 576px ‚úì
- 58mm √ó 7.2 = 418px ‚úì

## üìê Height - Chi·ªÅu D√†i

### Presets C√≥ S·∫µn

| Height | ƒê·ªô d√†i | Khi n√†o d√πng |
|--------|--------|--------------|
| Auto | T·ª± ƒë·ªông | ‚≠ê Khuy·∫øn ngh·ªã, fit theo n·ªôi dung |
| 800px | Ng·∫Øn | Bill c√≥ √≠t th√¥ng tin |
| 1000px | Trung b√¨nh | Bill th√¥ng th∆∞·ªùng |
| 1200px | D√†i | Bill nhi·ªÅu th√¥ng tin |
| 1500px | R·∫•t d√†i | Bill c√≥ nhi·ªÅu s·∫£n ph·∫©m |

### Custom Height

**C√°ch d√πng:**
1. Ch·ªçn "Custom..." trong dropdown Height
2. Nh·∫≠p s·ªë pixels (400-3000)
3. Test in

**L∆∞u √Ω:**
- **Auto** (khuy·∫øn ngh·ªã): Chi·ªÅu d√†i t·ª± ƒë·ªông theo n·ªôi dung
- **Fixed height**: C·∫Øt ho·∫∑c th√™m kho·∫£ng tr·∫Øng ƒë·ªÉ fit height

## ‚ö´ Threshold - ƒê·ªô ƒê·∫≠m Ch·ªØ

### Presets C√≥ S·∫µn

| Threshold | ƒê·ªô ƒë·∫≠m | Khi n√†o d√πng |
|-----------|--------|--------------|
| 85 | R·∫•t ƒë·∫≠m | M√°y in ch·∫•t l∆∞·ª£ng t·ªët |
| 95 | ƒê·∫≠m | ‚≠ê Khuy·∫øn ngh·ªã |
| 105 | V·ª´a | Gi·∫•y ch·∫•t l∆∞·ª£ng trung b√¨nh |
| 115 | C√¢n b·∫±ng | M·∫∑c ƒë·ªãnh c≈© |
| 125 | Nh·∫π | Gi·∫•y ch·∫•t l∆∞·ª£ng k√©m |

**Nguy√™n t·∫Øc:**
- S·ªë **c√†ng th·∫•p** = ch·ªØ **c√†ng ƒë·∫≠m**
- S·ªë **c√†ng cao** = ch·ªØ **c√†ng nh·∫°t**

## üîç Scale - T·ª∑ L·ªá Ph√≥ng To

### Presets C√≥ S·∫µn

| Scale | Ch·∫•t l∆∞·ª£ng | Khi n√†o d√πng |
|-------|-----------|--------------|
| 1x | B√¨nh th∆∞·ªùng | In nhanh, ch·∫•t l∆∞·ª£ng th·∫•p |
| 1.5x | T·ªët | C√¢n b·∫±ng t·ªëc ƒë·ªô & ch·∫•t l∆∞·ª£ng |
| 2x | Cao | ‚≠ê Khuy·∫øn ngh·ªã |
| 2.5x | R·∫•t cao | Bill quan tr·ªçng |
| 3x | T·ªëi ƒëa | Ch·∫•t l∆∞·ª£ng cao nh·∫•t, ch·∫≠m |

**L∆∞u √Ω:**
- Scale cao = ch·ªØ n√©t h∆°n, file l·ªõn h∆°n, x·ª≠ l√Ω l√¢u h∆°n
- Scale 2x l√† t·ªëi ∆∞u cho h·∫ßu h·∫øt tr∆∞·ªùng h·ª£p

## üé® C√°c Tr∆∞·ªùng H·ª£p S·ª≠ D·ª•ng

### Case 1: Bill Ti√™u Chu·∫©n (Khuy·∫øn Ngh·ªã)

```
Width: 576px (80mm)
Height: Auto
Threshold: 95
Scale: 2x
```

**Ph√π h·ª£p cho:** H·∫ßu h·∫øt c√°c m√°y in 80mm

### Case 2: Bill Nh·ªè G·ªçn

```
Width: 432px (60mm)
Height: Auto
Threshold: 95
Scale: 2x
```

**Ph√π h·ª£p cho:** M√°y in 58mm, 60mm

### Case 3: Bill Ch·∫•t L∆∞·ª£ng Cao

```
Width: 576px (80mm)
Height: Auto
Threshold: 85
Scale: 3x
```

**Ph√π h·ª£p cho:** Bill quan tr·ªçng c·∫ßn in r·∫•t r√µ

### Case 4: Bill In Nhanh

```
Width: 432px (60mm)
Height: 800px
Threshold: 105
Scale: 1x
```

**Ph√π h·ª£p cho:** C·∫ßn in nhanh, ch·∫•t l∆∞·ª£ng ƒë·ªß d√πng

### Case 5: Custom Ho√†n To√†n

```
Width: Custom (nh·∫≠p tay)
Height: Custom (nh·∫≠p tay)
Threshold: 95
Scale: 2x
```

**Ph√π h·ª£p cho:** M√°y in ƒë·∫∑c bi·ªát, kh·ªï gi·∫•y kh√°c th∆∞·ªùng

## üöÄ C√°ch S·ª≠ D·ª•ng

### B∆∞·ªõc 1: M·ªü Config

Double-click `printer-config.html`

### B∆∞·ªõc 2: Ch·ªçn Width

**Option A:** Ch·ªçn preset (576px, 512px, 432px, 384px)

**Option B:** Ch·ªçn "Custom...", nh·∫≠p s·ªë pixels

### B∆∞·ªõc 3: Ch·ªçn Height

**Option A:** Ch·ªçn "Auto" (khuy·∫øn ngh·ªã)

**Option B:** Ch·ªçn preset (800px, 1000px, 1200px, 1500px)

**Option C:** Ch·ªçn "Custom...", nh·∫≠p s·ªë pixels

### B∆∞·ªõc 4: Ch·ªçn Threshold & Scale

D√πng m·∫∑c ƒë·ªãnh (Threshold: 95, Scale: 2x) ho·∫∑c t√πy ch·ªânh

### B∆∞·ªõc 5: Test In

Nh·∫•n "Test In Bill" v√† ki·ªÉm tra k·∫øt qu·∫£

### B∆∞·ªõc 6: ƒêi·ªÅu Ch·ªânh

N·∫øu ch∆∞a ∆∞ng √Ω, thay ƒë·ªïi c√°c tham s·ªë v√† test l·∫°i

## üìä Live Preview

Trong ph·∫ßn "K√≠ch th∆∞·ªõc hi·ªán t·∫°i", b·∫°n s·∫Ω th·∫•y:

```
Width: 576px
Height: Auto
Scale: 2x
```

Preview n√†y c·∫≠p nh·∫≠t real-time khi b·∫°n thay ƒë·ªïi settings.

## üí° Tips & Tricks

### Tip 1: T√¨m Width Ph√π H·ª£p

1. ƒêo kh·ªï gi·∫•y m√°y in (mm)
2. Nh√¢n v·ªõi 7.2
3. L√†m tr√≤n ƒë·∫øn b·ªôi s·ªë c·ªßa 8

**V√≠ d·ª•:**
- 80mm ‚Üí 80 √ó 7.2 = 576px ‚úì
- 58mm ‚Üí 58 √ó 7.2 = 418 ‚Üí **416px** (chia h·∫øt cho 8)

### Tip 2: Height Auto vs Fixed

**D√πng Auto khi:**
- ‚úÖ N·ªôi dung bill thay ƒë·ªïi
- ‚úÖ Mu·ªën ti·∫øt ki·ªám gi·∫•y
- ‚úÖ Kh√¥ng bi·∫øt ch√≠nh x√°c ƒë·ªô d√†i

**D√πng Fixed khi:**
- ‚úÖ Mu·ªën t·∫•t c·∫£ bill c√πng ƒë·ªô d√†i
- ‚úÖ C√≥ template c·ªë ƒë·ªãnh
- ‚úÖ C·∫ßn cƒÉn ch·ªânh ch√≠nh x√°c

### Tip 3: Threshold vs Gi·∫•y

| Lo·∫°i gi·∫•y | Threshold khuy·∫øn ngh·ªã |
|-----------|----------------------|
| Gi·∫•y t·ªët, m·ªõi | 85-95 |
| Gi·∫•y th∆∞·ªùng | 95-105 |
| Gi·∫•y c≈©, x·∫•u | 105-115 |

### Tip 4: Scale vs T·ªëc ƒê·ªô

| Scale | Th·ªùi gian x·ª≠ l√Ω | Ch·∫•t l∆∞·ª£ng |
|-------|-----------------|-----------|
| 1x | ~1s | Th·∫•p |
| 1.5x | ~1.5s | Trung b√¨nh |
| 2x | ~2s | Cao ‚≠ê |
| 2.5x | ~3s | R·∫•t cao |
| 3x | ~4s | T·ªëi ƒëa |

### Tip 5: Custom Width cho C√°c Kh·ªï ƒê·∫∑c Bi·ªát

| Kh·ªï gi·∫•y | Width ƒë·ªÅ xu·∫•t |
|----------|---------------|
| 48mm | 345px |
| 58mm | 418px |
| 76mm | 547px |
| 80mm | 576px ‚≠ê |
| 110mm | 792px |

## üêõ Troubleshooting

### Bill b·ªã c·∫Øt ngang

**Nguy√™n nh√¢n:** Width qu√° l·ªõn

**Gi·∫£i ph√°p:** Gi·∫£m width xu·ªëng

### Bill qu√° ng·∫Øn/d√†i

**Nguy√™n nh√¢n:** Height kh√¥ng ph√π h·ª£p

**Gi·∫£i ph√°p:** 
- D√πng "Auto" ƒë·ªÉ t·ª± ƒë·ªông
- Ho·∫∑c tƒÉng/gi·∫£m height

### Ch·ªØ qu√° m·ªù

**Nguy√™n nh√¢n:** Threshold qu√° cao

**Gi·∫£i ph√°p:** Gi·∫£m threshold (95 ‚Üí 85)

### Ch·ªØ qu√° ƒë·∫≠m (b·ªã d√≠nh)

**Nguy√™n nh√¢n:** Threshold qu√° th·∫•p

**Gi·∫£i ph√°p:** TƒÉng threshold (95 ‚Üí 105)

### In ch·∫≠m

**Nguy√™n nh√¢n:** Scale qu√° cao

**Gi·∫£i ph√°p:** Gi·∫£m scale (3x ‚Üí 2x)

### Ch·ªØ kh√¥ng n√©t

**Nguy√™n nh√¢n:** Scale qu√° th·∫•p

**Gi·∫£i ph√°p:** TƒÉng scale (1x ‚Üí 2x)

## üìù Code Example

### TypeScript

```typescript
import { printHTMLToXC80, getActivePrinter } from './printer-utils';

async function printCustomBill(html: string) {
  const printer = getActivePrinter();
  
  const result = await printHTMLToXC80(printer!, html, {
    width: 576,       // 80mm
    height: null,     // Auto
    threshold: 95,    // Bold
    scale: 2          // High quality
  });
  
  return result;
}

// Custom size
async function printSmallBill(html: string) {
  const printer = getActivePrinter();
  
  const result = await printHTMLToXC80(printer!, html, {
    width: 432,       // 60mm
    height: 800,      // Short
    threshold: 95,
    scale: 1.5        // Fast
  });
  
  return result;
}
```

### JavaScript

```javascript
async function printBill(html) {
  const response = await fetch('http://localhost:3001/print/html', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      printerIp: '192.168.1.100',
      printerPort: 9100,
      html: html,
      width: 576,       // T√πy ch·ªânh
      height: null,     // Auto
      threshold: 95,    // T√πy ch·ªânh
      scale: 2          // T√πy ch·ªânh
    })
  });
  
  return await response.json();
}
```

## ‚úÖ Checklist

- [ ] ƒê√£ ch·ªçn width ph√π h·ª£p v·ªõi m√°y in
- [ ] ƒê√£ ch·ªçn height (Auto ho·∫∑c custom)
- [ ] ƒê√£ ch·ªçn threshold ph√π h·ª£p v·ªõi gi·∫•y
- [ ] ƒê√£ ch·ªçn scale c√¢n b·∫±ng ch·∫•t l∆∞·ª£ng/t·ªëc ƒë·ªô
- [ ] ƒê√£ test in v√† ki·ªÉm tra
- [ ] K·∫øt qu·∫£ in ƒë·∫πp, r√µ r√†ng

## üìû Support

N·∫øu c·∫ßn tr·ª£ gi√∫p:

1. Check live preview trong config
2. Test v·ªõi nhi·ªÅu settings kh√°c nhau
3. Ch·ª•p ·∫£nh bill in ra
4. Note l·∫°i settings ƒë√£ d√πng

---

**Updated:** 20/10/2025  
**Version:** 3.0 - Custom Size Support